(()=>{"use strict";var e={311:(e,t)=>{t.Z=(e,t)=>{const o=e.__vccOpts||e;for(const[e,r]of t)o[e]=r;return o}}},t={};function o(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,o),a.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{const e=Vue,t={class:"app"},r={class:"header"},n={key:1},a={class:"content-area"},s={data:()=>({loadingLogin:!0}),computed:{authenticated(){return this.$store.getters.authenticated},username(){return this.$store.getters.username}},mounted(){this.$store.dispatch("checkLogin").finally((()=>{this.loadingLogin=!1}))},methods:{gotoIndex(){"index"!==this.$route.name&&this.$router.push({name:"index"})},logIn(){let e=window.prompt("Username","");if(!(e||[]).trim())return;let t=window.prompt("Password","");(t||[]).trim()&&(this.loadingLogin=!0,this.$store.dispatch("logIn",{username:e,password:t}).catch((e=>{e&&e.response&&403===e.response.status?window.alert("Invalid username or password"):window.alert("Error logging in")})).finally((()=>{this.loadingLogin=!1})))},logOut(){window.confirm("Log out?")&&this.$store.dispatch("logOut").catch((e=>{window.alert("Error logging out")}))}}};var l=o(311);const c=(0,l.Z)(s,[["render",function(o,s,l,c,i,u){const d=(0,e.resolveComponent)("router-view");return(0,e.openBlock)(),(0,e.createElementBlock)("div",t,[(0,e.createElementVNode)("div",r,[(0,e.createElementVNode)("h1",{onClick:s[0]||(s[0]=e=>u.gotoIndex())},"Go Vue Starter"),u.authenticated?((0,e.openBlock)(),(0,e.createElementBlock)(e.Fragment,{key:0},[(0,e.createElementVNode)("span",null,(0,e.toDisplayString)(u.username),1),(0,e.createElementVNode)("button",{onClick:s[1]||(s[1]=e=>u.logOut())},"Log out")],64)):i.loadingLogin?((0,e.openBlock)(),(0,e.createElementBlock)("span",n,"Loading login...")):((0,e.openBlock)(),(0,e.createElementBlock)("button",{key:2,onClick:s[2]||(s[2]=e=>u.logIn())},"Log in"))]),(0,e.createElementVNode)("div",a,[(0,e.createVNode)(d)])])}]]),i=VueRouter,u={class:"index-page"},d=(0,e.createElementVNode)("br",null,null,-1),m=(0,e.createElementVNode)("br",null,null,-1),g={methods:{testAjax(){this.$router.push({name:"test"})}}},p=(0,l.Z)(g,[["render",function(t,o,r,n,a,s){return(0,e.openBlock)(),(0,e.createElementBlock)("div",u,[(0,e.createTextVNode)(" Vue app running "),d,m,(0,e.createElementVNode)("button",{onClick:o[0]||(o[0]=e=>s.testAjax())},"Test AJAX")])}]]),h={class:"test-page"},k=axios,E=o.n(k)().create({headers:{"Content-Type":"multipart/form-data"}}),x={data:()=>({message:"",error:null}),beforeRouteEnter(e,t,o){E.get("/ajax/test").then((e=>{o((t=>{t.message=e.data.message}))})).catch((e=>{o((t=>{t.error=e.toJSON()}))}))},beforeRouteUpdate(e,t,o){E.get("/ajax/test").then((e=>{vm.message=e.data.message,vm.error=null,o()})).catch((e=>{vm.message="",vm.error=e.toJSON(),o()}))}},y=(0,l.Z)(x,[["render",function(t,o,r,n,a,s){return(0,e.openBlock)(),(0,e.createElementBlock)("div",h,[a.error?((0,e.openBlock)(),(0,e.createElementBlock)(e.Fragment,{key:0},[0===a.error.readyState?((0,e.openBlock)(),(0,e.createElementBlock)(e.Fragment,{key:0},[(0,e.createTextVNode)(" Could not connect ")],64)):4===a.error.readyState?((0,e.openBlock)(),(0,e.createElementBlock)(e.Fragment,{key:1},[(0,e.createTextVNode)(" Error response code "+(0,e.toDisplayString)(a.error.status),1)],64)):((0,e.openBlock)(),(0,e.createElementBlock)(e.Fragment,{key:2},[(0,e.createTextVNode)(" Error in readyState "+(0,e.toDisplayString)(a.error.readyState),1)],64))],64)):((0,e.openBlock)(),(0,e.createElementBlock)(e.Fragment,{key:1},[(0,e.createTextVNode)((0,e.toDisplayString)(a.message),1)],64))])}]]),B={class:"not-found-page"},v={},f=(0,l.Z)(v,[["render",function(t,o,r,n,a,s){return(0,e.openBlock)(),(0,e.createElementBlock)("div",B," Not found ")}]]),w=(0,i.createRouter)({history:(0,i.createWebHistory)(),routes:[{name:"index",path:"/",component:p},{name:"test",path:"/test",component:y},{path:"/:notFound",component:f}]}),V=(0,Vuex.createStore)({state:()=>({user:null}),getters:{authenticated:e=>!!e.user,username:e=>e.user?e.user.username:""},mutations:{setUser(e,t){e.user=t}},actions:{checkLogin(e){let{commit:t}=e;return E.get("/ajax/fetchLogin").then((e=>{t("setUser",e.data)}))},logIn(e,t){let{getters:o,dispatch:r,commit:n}=e;return o.authenticated?r("logOut").then((()=>r("logIn",t))):E.post("/ajax/login",t).then((e=>{n("setUser",e.data)}))},logOut(e){let{getters:t,commit:o}=e;return t.authenticated?E.post("/ajax/logout").then((()=>{o("setUser",null)})):Promise.resolve()}}}),N=(0,e.createApp)(c);window.app=N,N.use(w),N.use(V),N.mount("#app")})()})();